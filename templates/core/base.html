{% load static %}


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GreenLoan</title>

  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />
  <link href="{% static 'bootstrap-icons/bootstrap-icons.min.css' %}" rel="stylesheet" />
  <link href="{% static 'fontawesome-free-web/css/all.min.css' %}" rel="stylesheet" />
  <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
  <link rel="shortcut icon" href="{% static 'favicon.ico' %}" type="image/x-icon">

  <link rel="stylesheet" href="{% static 'Customcss/basestyle.css' %}" />
  {% block extra_css %}{% endblock %}
</head>

<body>
  <style>
    body::after {
      content: "www.bibekbhandari.com.np";
      position: fixed;
      inset: 0;

      background-image: url("{% static 'customSVG/GreenLoan.png' %}");
      background-repeat: no-repeat;
      background-position: center;
      background-size: clamp(280px, 60vw, 900px);

      opacity: 0.08;
      pointer-events: none;
      z-index: 1;
    }
  </style>
  <nav class="navbar navbar-expand-lg bg-transparent" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);border-bottom: 1px solid rgba(85, 107, 47, 0.2);box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
     z-index: 40;position: sticky; top: 0;">
    <div class="container">
      <div class="d-flex align-items-start ">
        <a href="{% url 'core:index'%}" class="navbar-brand d-flex align-items-center text-decoration-none">
          <div class="logo-icon me-3 align-items-start">
            <img src="{% static 'customSVG/GreenLoan.png' %}" alt="logo" class="img-fluid"
              style="width: 160px; height: 70px;"></img>
          </div>
        </a>
      </div>
      <button class="navbar-toggler border-0 navbar-light text-end" type="button" data-bs-toggle="collapse"
        data-bs-target="#navbarNav" style="color: var(--primary-dark)">
        <span class="navbar-toggler-icon "></span>
      </button>

      <div class="collapse navbar-collapse border-warning" id="navbarNav">
        <ul class="navbar-nav me-auto">
          {% if user.is_authenticated%}
          {% if user.role != "customer" %}
          <li class="nav-item dropdown text-end">
          <li class="nav-item">
            <a href="{% url 'loans:landing' %}" class="nav-link border border-success rounded px-3 mx-1 
            {% if request.resolver_match.view_name == 'loans:landing' %}active-link{% endif %}"
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">
              Statistical Data</a>
          </li>
          {% endif %}
          <li class="nav-item">
            <a href="{% url 'accounts:dashboard' %}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'accounts:dashboard' %}active-link{% endif %}"
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">
              Loan DashBoard</a>
          </li>
          {% if user.role == 'customer' %}
          <li class="nav-item">

            <a href="{% url 'loans:apply_loan'%}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'loans:apply_loan' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">Apply
              for loan
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'accounts:profile'%}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'accounts:profile' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">Profile</a>
          </li>
          <li class="nav-item">
            <a href="{% url 'loans:repayment_list' %}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'loans:repayment_list' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">
              Credit Repayment </a>
          </li>
          {% endif %}
          {% if user.role != 'customer' %}
          <li class="nav-item">
            <a href="{% url 'accounts:kycapplication'%}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'accounts:kycapplication' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">KYC
              Verify Application</a>
          </li>
          {% endif %}
          {% if user.role == 'admin' %}
          <li class="nav-item">
            <a href="{% url 'core:settings'%}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'core:settings' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">Settings</a>
          </li>
          <li class="nav-item">
            <a href="{% url 'core:audit_models'%}" class="nav-link border border-success rounded px-3 mx-1
            {% if request.resolver_match.view_name == 'core:audit_models' %}active-link{% endif %} "
              style="color: var(--primary-color); font-weight: 500; transition: all 0.3s ease;"
              onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
              onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">Audit Log</a>
          </li>
          {% endif %}
          {% endif %}
        </ul>

        <ul class="navbar-nav ms-auto">
          {% if user.is_authenticated %}
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" id="navbarDropDown" role="button"
              data-bs-toggle="dropdown" style="
              color: var(--primary-color);
              font-weight: 500;
              position: static;
              z-index: 5;
            ">
              {% if user.kyc_status == "pending" and user.role == "customer" %}
              <div class="mb-1">
                <span class="badge bg-danger" style="font-size: 0.75rem;">
                  Pending KYC
                </span>
              </div>
              {% elif user.kyc_status == "submitted" and user.role == "customer" %}
              <div class="mb-1">
                <span class="badge bg-danger" style="font-size: 0.75rem;">
                  Submitted KYC
                </span>
              </div>
              {% endif %}
              <div class="user-avatar me-2">
                {{ user.first_name|first|default:user.username|first|upper }}
              </div>
              {{ user.get_full_name|default:user.username }}
            </a>

            <ul class="dropdown-menu shadow">
              {% if user.role == "customer" %}
              <li>
                <a href="{% url 'accounts:profile' %}" class="dropdown-item">
                  <i class="fas fa-user me-2"></i>Profile
                </a>
              </li>
              {% endif %}
              <li>
                <a href="{% url 'accounts:changepassword' %}" class="dropdown-item">
                  <i class="fas fa-user me-2"></i>Change Password
                </a>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <form action="{% url 'accounts:logout' %}" method="post">
                  {%csrf_token%}
                  <button class="dropdown-item" type="submit">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                  </button>
                </form>
              </li>
            </ul>
          </li>
          {%else%}
          <li class="nav-item">
            <a href="{% url 'accounts:login' %}" class="nav-link">
              <button
                class="btn btn-ghost border border-success rounded px-3 mx-1 {% if request.resolver_match.view_name == 'accounts:login' %}active-link{% endif %}"
                style="
                color: var(--primary-color);
                font-weight: 500;
                background: transparent;
              " onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
                onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">
                Login
              </button>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'accounts:signup' %}" class="nav-link">
              <button
                class="btn border border-success rounded px-3 mx-1 {% if request.resolver_match.view_name == 'accounts:signup' %}active-link{% endif %}"
                style="
                color: var(--primary-color);
                font-weight: 500;
                background: transparent;
              " onmouseover="this.style.backgroundColor='var(--primary-color)'; this.style.color='var(--primary-light)'; this.style.borderColor='var(--primary-dark)';"
                onmouseout="this.style.backgroundColor='var(--primary-light)'; this.style.color='var(--primary-color)'; this.style.borderColor='var(--primary-dark)';">
                Get Started
              </button>
            </a>
          </li>
          {% endif %}
        </ul>
      </div>
  </nav>


  <main class="flex-grow-1">
    <div class="container my-4">
      {% if messages %}
      {% for message in messages %}
      <div class="alert 
      {% if 'error' in message.tags %}alert-danger
      {% elif 'success' in message.tags %}alert-success
      {% else %}alert-info{% endif %}
      alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        {% endfor %}
        {% endif %}
      </div>


      {% block content %}
      {% endblock %}
    </div>
  </main>

  <footer class="text-center text-lg-start mt-2" style="background-color: var(--primary-color)">
    <div class="container d-flex justify-content-center py-5">
      <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;"
        onclick="window.open('https://www.facebook.com/bibek33012','_blank')">
        <i class="fab fa-facebook-f">
        </i>
      </button>
      <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;"
        onclick="window.open('https://www.youtube.com/@bhandaribibek27','_blank')">
        <i class="fab fa-youtube"></i>
      </button>
      <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;"
        onclick="window.open('https://www.linkedin.com/in/bibek-bhandari-81542b304','_blank')">
        <i class="fab fa-linkedin"></i>
      </button>
      <button type="button" class="btn btn-primary btn-lg btn-floating mx-2" style="background-color: #54456b;"
        onclick="window.open('https://www.bibekbhandari.com.np','_blank')">
        <i class="fab fa-twitter"></i>
      </button>
    </div>

    <div class="text-center text-white p-3" style="background-color: var(--primary-dark);">
      Â© 2025 Copyright:
      <a class="text-white" href="https://bibekbhandari.com.np">www.bibekbhandari.com.np</a>
    </div>

  </footer>


  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'Customjs/base.js' %}"></script>
</body>

</html>