{% extends "core/base.html" %}

{% block content %}

<div class="container py-4" style="font-family: Arial, sans-serif;">

    <!-- College Name -->
    <h1 class="text-center mb-4">
        Danfe College
    </h1>

    <hr class="mb-4">

    <!-- Semester Form -->
    <form method="post" class="mx-auto p-4 border rounded shadow-sm bg-light" style="max-width: 600px;">
        {% csrf_token %}
        <div class="mb-3 text-start">
            <label for="semester" class="form-label fw-bold">Select Semester:</label>
            <select name="semester" id="semester" class="form-select">
                <option value="">-- Select Semester --</option>
                {% for i in semesters %}
                <option value="{{ i }}">Semester {{ i }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="rollno" class="form-label">Roll No:</label>
            <input type="number" class="form-control" id="rollno" name="rollno" placeholder="Enter Roll Number">
        </div>

        <div class="mb-3">
            <label for="fullname" class="form-label">Full Name:</label>
            <input type="text" class="form-control" id="fullname" name="fullname" placeholder="Enter Full Name">
        </div>

        <div class="mb-3">
            <label class="form-label d-block">Participation:</label>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="participation" id="participationYes" value="true">
                <label class="form-check-label" for="participationYes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="participation" id="participationNo" value="false">
                <label class="form-check-label" for="participationNo">No</label>
            </div>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-primary w-50">Add Student</button>
        </div>
    </form>

    <div class="text-end mb-3">
        <button class="btn btn-secondary" onclick="window.print();">
            üñ®Ô∏è Print Table
        </button>
    </div>

    <!-- Student Table -->
    <div class="table-responsive print-table">
        <table class="table table-striped table-hover table-bordered align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th scope="col">SN</th>
                    <th scope="col">Semester</th>
                    <th scope="col">Roll No</th>
                    <th scope="col">Name</th>
                    <th scope="col">Participation</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ student.student_semester }}</td>
                    <td>{{ student.serial_number }}</td>
                    <td>{{ student.student_name }}</td>
                    <td>{{ student.participation|yesno:"Yes,No" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">No records found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
<style>
@media print {
    body * {
        visibility: hidden; /* Hide everything */
    }
    .print-table, .print-table * {
        visibility: visible; /* Show table */
    }
    .print-table {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
    }
}
</style>

{% endblock %}
